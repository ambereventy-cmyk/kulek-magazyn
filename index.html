<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Kulek magazyn – lista</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f4f4f4; margin: 0; }
    header { background: #333; color: #fff; padding: 10px; text-align: center; font-size: 1.5em; }
    table { width: 100%; border-collapse: collapse; background: #fff; margin: 0; }
    th, td { padding: 10px; border-bottom: 1px solid #ddd; vertical-align: top; }
    th { background: #555; color: #fff; text-align: left; }
    img { max-width: 100px; max-height: 80px; object-fit: cover; border-radius: 4px; }
    .desc { font-size: 0.9em; color: #555; }
    @media (max-width: 768px) {
      table, thead, tbody, th, td, tr { display: block; }
      thead tr { display: none; }
      tr { margin-bottom: 15px; background: #fff; border-radius: 5px; padding: 10px; }
      td { border: none; position: relative; padding-left: 50%; }
      td:before { position: absolute; left: 10px; top: 10px; width: 45%; white-space: nowrap; font-weight: bold; }
      td:nth-of-type(1):before { content: "Zdjęcie"; }
      td:nth-of-type(2):before { content: "Nazwa"; }
      td:nth-of-type(3):before { content: "Cena"; }
      td:nth-of-type(4):before { content: "Ilość"; }
      td:nth-of-type(5):before { content: "Kategoria"; }
      td:nth-of-type(6):before { content: "Opis"; }
    }
  </style>
</head>
<body>
<header>Kulek magazyn – lista produktów</header>
<table id="productTable">
  <thead>
    <tr>
      <th>Zdjęcie</th>
      <th>Nazwa</th>
      <th>Cena</th>
      <th>Ilość</th>
      <th>Kategoria</th>
      <th>Opis</th>
    </tr>
  </thead>
  <tbody>
    <tr><td colspan="6">Ładowanie produktów...</td></tr>
  </tbody>
</table>

<script>
const dataUrl = "products (6).json";

async function loadProducts() {
  try {
    const res = await fetch(dataUrl);
    if (!res.ok) throw new Error("Błąd pobierania pliku JSON");
    const products = await res.json();
    renderProducts(products);
  } catch (err) {
    const tbody = document.querySelector("#productTable tbody");
    tbody.innerHTML = `<tr><td colspan="6">Nie udało się wczytać produktów: ${err.message}</td></tr>`;
  }
}

function renderProducts(products) {
  const tbody = document.querySelector("#productTable tbody");
  tbody.innerHTML = "";
  products.forEach(p => {
    if (!p.Nazwa) return;
    const tr = document.createElement("tr");

    const tdImg = document.createElement("td");
    const img = document.createElement("img");
    img.src = p.Link && p.Link.trim() ? p.Link : "https://via.placeholder.com/100x80?text=Brak+zdjecia";
    tdImg.appendChild(img);

    const tdName = document.createElement("td");
    tdName.textContent = p.Nazwa;

    const tdPrice = document.createElement("td");
    tdPrice.textContent = p.Cena && p.Cena.trim() !== "" ? `${p.Cena} zł` : "brak";

    const tdQty = document.createElement("td");
    tdQty.textContent = p.Ilość || "";

    const tdCat = document.createElement("td");
    tdCat.textContent = p.Kategoria || "";

    const tdDesc = document.createElement("td");
    tdDesc.innerHTML = `<span class="desc">${p.Opis || ""}</span>`;

    tr.appendChild(tdImg);
    tr.appendChild(tdName);
    tr.appendChild(tdPrice);
    tr.appendChild(tdQty);
    tr.appendChild(tdCat);
    tr.appendChild(tdDesc);

    tbody.appendChild(tr);
  });
}

loadProducts();
</script>
</body>
</html>

